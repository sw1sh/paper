\section{Introduction}
\subsection{Second quantization for fermions}
The fermion creation and annihilation operators obey the following fundamental anticommutation relations

\[ {a_\alpha,a_\beta^\dagger} = a_\alpha a_\beta^\dagger + a_\beta^\dagger a_\alpha = \delta_{\alpha,\beta} \]

\[ {a_\alpha,a_\beta} = {a_\alpha^\dagger,a_\beta^\dagger} = 0 \]

One-body and two-body operators in Fock space have the following form respectively

\[ \hat{A} = \sum_{\alpha\beta}\bra{\alpha}A\ket{\beta}a_\alpha^\dagger a_\beta \]

\[ \hat{B} = \frac{1}{2} \sum_{\alpha\beta\gamma\delta}\bra{\alpha\beta}B\ket{\alpha\beta} a_\alpha^\dagger a_\beta^\dagger a_\delta a_\gamma \]

Using this Fock space formulation, the Hamiltonian of a many-particle system in second quantized form can be written as

\[ \hat{H} = \hat{T}+\hat{V} = \sum_{\alpha\beta}\bra{\alpha}T\ket{\beta}a_\alpha^\dagger a_\beta 
    + \frac{1}{2} \sum_{\alpha\beta\gamma\delta}\bra{\alpha\beta}V\ket{\alpha\beta} a_\alpha^\dagger a_\beta^\dagger a_\delta a_\gamma\]

where $\hat{T}$ and $\hat{V}$ are the kinetic energy and two-body interaction operators.

\subsection{Interaction representation}
Given the Hamiltonian $H=H_0+V$ with $H_0$ and $V$ as noninteracting and interacting part respectively,
evolution of states and operators are described by following equations
\[ i\pd{}{t}\ket{\psi_I(t)}=V_I(t)\ket{\psi_I(t)} \]
\[ -i\pd{O_I(t)}{t}=\comm{H_0}{O_I(t)} \]

with states and operators defined as
\[ \ket{\psi_I} = e^{i H_0 t}\ket{\psi_S(t)} \]
\[ O_I(t) = e^{i H_0 t} O_S e^{-i H_0 t} \] 

The evolution of the wave function is thus

\[ \ket{\psi_I(t)} = U(t) \ket{\psi_I(0)} \]

so that

\[ i\pd{U(t)}{t} = V(t) U(t) \]

using T-operator we obtain time-ordered exponential

\[ U(t) = T\left[exp\left\{-i\int_{0}^{t}V(t')dt'\right\}\right] \]

\subsection{Finite temperature}
The essential step to finite temperature is possible due to the Japanese physicist Kubo, who noticed
that the quantum-mechanical partition function can be regarded as a time-evolution operator in imaginary time.

\[ \hat{\rho} \propto e^{-\beta \hat{H}} = U(-i\hbar\beta) \]

Later, Matsubara wrote down the first imaginary time formulation of finite temperature many body physics.
In the imaginary time approach, the partition function of a quantum system is simply the trace 
of the time-evolution operator, evaluated at imaginary time $t = -i\hbar\beta$,

\[ Z = Tr\ e^{-\beta H} = Tr\ U(-i\hbar\beta)\]

whilst the expectation value of a quantity $A$ in thermal equilibrium is given by

\[ <A> = \frac{Tr[U(-i\hbar\beta)A]}{Tr[U(-i\hbar\beta)]} \]

Switching from $t$ to $i\tau$ with $\tau\in\{0,\beta=\frac{1}{k_B T}\}$ we obtain

\[ U(\tau) = T\left[exp\left\{-\int_{0}^{\tau}V(\tau')d\tau'\right\}\right] \]

We can relate the partition function to the evolution operator as follows

\[ Z = Tr\left[e^{-\beta H}\right] = Z_0\left<U(\beta)\right>_0 \]

where 

\[ Z_0 = Tr\left[e^{-\beta H_0}\right] \]

\[ \left<A\right>_0 = \frac{Tr\left[e^{-\beta H_0}A\right]}{Z_0} \]

Now we can write the ratio of the interacting to the non-interacting partition function

\[ S = \frac{Z}{Z_0} = \langle T\ exp\left[-\int_{0}^{\beta}V(\tau)d\tau\right]\rangle \]

\subsection{Perturbation expansion}
Expanding the time-ordered exponential, gives us a perturbation series for the S-matrix

\[ S = \frac{Z}{Z_0} = \sum_{n=0}^{\infty}\frac{(-1)^n}{n!}\int_{0}^{\beta}\dots\int_{0}^{\beta} d\tau_1\dots d\tau_n 
    \langle T V(\tau_1)\dots V(\tau_n) \rangle \]

Taking the logarithm of it yields

\[ \ln{S} = \sum_{n=1}^{\infty}\frac{(S-1)^n}{n} = \sum_{n=1}^{\infty}
  \frac{(\sum_{k=1}^{\infty}\frac{(-1)^k}{k!}\int_{0}^{\beta}\dots\int_{0}^{\beta} d\tau_1\dots d\tau_k 
    \langle T V(\tau_1)\dots V(\tau_k) \rangle)^n}{n} \]

\subsection{Green functions}
We define $n$-particle Green function as follows

\[ \G(1\dots n;1'\dots n') = (-1)^n\langle T c(1)\dots c(n)c(1')\dots c(n')\rangle \]

Adding auxiliary source terms to our interaction
\[ V(t) \mapsto V(t) + \sum_n \tilde{\alpha}(n)c(n)+c^\dagger(n) \alpha(n) \] 

where $\alpha(t)$ and $\tilde{\alpha}(t)$ are the anti-commuting forces which ``create'' and ``annihilate'' particles respectively.
We then obtain $n$-particle Green functions as follows

\[ \G(1\dots n;1'\dots n') = \left.\frac{1}{S}\frac{\partial^n S}{\partial\alpha(1)\partial\tilde{\alpha}(1')\dots \partial\alpha(n)\partial\tilde{\alpha}(n')}\right|_{\alpha,\tilde{\alpha}=0} \]

And the $n$-th order coefficient of $\alpha$ and $\tilde{\alpha}$ in the expansion of S-matrix
is known as the irreducible $n$-point Green function $\G_{irr}$ or the $n$-point vertex function $\Gamma$.

\[ \Gamma(1\dots n;1'\dots n') = \left.\frac{\partial^n \ln{S}}{\partial\alpha(1)\partial\tilde{\alpha}(1')\dots \partial\alpha(n)\partial\tilde{\alpha}(n')}\right|_{\alpha,\tilde{\alpha}=0} \]

\subsection{Matsubara Representation}
Green functions satisfy the relation

\[ \G(\tau+\beta) = \pm \G(\tau) \]

so that bosonic (fermionic) Green functions are periodic (antiperiodic), with period $\beta$.

The periodicity allow us to carry out a Fourier expansion of the Green functions in terms of discrete frequencies.
Matsubara frequencies are defined as
\begin{align*}
  & \nu_n = 2\pi n k_B T \quad (Boson) \\ 
  & \omega_n = \pi(2n+1)k_B T \quad (Fermion)
\end{align*}

Fourier expansion and its inverse then

\begin{align*}
  & \G(\tau) = T\sum_n \G(i\alpha_n)e^{-i\alpha_n\tau} \\
  & \G(i\alpha_n) = \int_0^\beta d\tau \G(\tau) e^{i\alpha_n\tau} ,\quad \alpha_n = \nu_n, \omega_n
\end{align*}

\subsection{Feynman Diagrams}
Feynman Diagram techniques help to visualize the structure and apply physical interpretation
to the otherwise incomprehensible formulas.

\begin{align*}
  S = & \sum \{\text{Disconnected Feynman diagrams}\} \equiv \\
  1 & + 
  \left[
    \diagram{1}
    +
    \diagram{2}
  \right] \\
  & +
  \left[
    \begin{array}{@{}cc}
    & \diagram{1} \\
    & \diagram{1}
    \end{array}
    +
    \begin{array}{@{}cc}
    & \diagram{2} \\
    & \diagram{1}
    \end{array}
    +
    \begin{array}{@{}cc}
    & \diagram{2} \\
    & \diagram{2}
    \end{array}
    + \dots
  \right]
\end{align*}

\begin{align*}
  \ln{S} = \sum \{\text{Linked Cluster Diagrams}\} \equiv
  \left[
    \diagram{1}
    +
    \diagram{2}
    +
    \dots
  \right]
\end{align*}

\begin{align*}
  & \G(1,1') = \sum \{\text{Two legged diagrams}\} \equiv 
  \begin{tikzpicture}[baseline={([yshift=-3pt]current bounding box)}]
    \graph [spring layout, nodes={draw,circle,fill,scale=0.1}, vertical'=0 to 1]
    {
      1 -- [double distance=1pt, fermion] 0
    };
  \end{tikzpicture}
  =
  \left[
    \diagram{3}
    +
    \diagram{4}
    +
    \diagram{5}
    + \dots
  \right]
\end{align*}

\begin{align*}
\G^{(4)}(1,2,1',2') = \sum \{\text{Four legged diagrams}\} \equiv 
\left[
\begin{tikzpicture}[on grid, baseline={([yshift=-3pt]current bounding box)}]
  \tikzset{every node/.style={{draw,circle,fill,scale=0.2}}};
  \node (0) at (0,0) {};
  \node (1) at (2,0) {};
  \node (2) at (0,1) {};
  \node (3) at (2,1) {};
  \tikzset{every node/.style={scale=1}};
  \graph [use existing nodes, nodes={draw,circle,fill,scale=0.1}, horizontal'=0 to 1]
  {
    0 -- [fermion] 1,
    2 -- [fermion] 3;
  };
\end{tikzpicture}
+
\begin{tikzpicture}[on grid, baseline={([yshift=-3pt]current bounding box)}]
  \tikzset{every node/.style={{draw,circle,fill,scale=0.2}}};
  \node (0) at (0,0) {};
  \node (1) at (2,0) {};
  \node (2) at (0,1) {};
  \node (3) at (2,1) {};
  \node [coordinate] (c) at  (1,.5) {};
  \node [coordinate] (l) at (.9,.45) {};
  \node [coordinate] (r) at (1.1,.55) {};
  \tikzset{every node/.style={scale=1}};
  \graph [use existing nodes, nodes={draw,circle,fill,scale=0.1}, horizontal'=0 to 1]
  {
    0 -- [fermion] l -- [left,draw, looseness=1] r -- [draw] 3,
    2 -- [fermion] c -- [draw] 1;
  };
\end{tikzpicture}
+
\begin{tikzpicture}[baseline={([yshift=-3pt]current bounding box)}]
  \graph [spring layout, nodes={draw,circle,fill,scale=0.1}, vertical'=1 to 4]
  {
    0 -- [fermion] 1 -- [fermion] 2,
    1 -- [photon] 4,
    3 -- [fermion] 4 -- [fermion] 5;
  };
\end{tikzpicture}
+\dots
\right]
\end{align*}

